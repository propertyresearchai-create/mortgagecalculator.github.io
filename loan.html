<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Loan Calculator - Property Calculator Hub</title>
  <link rel="stylesheet" href="styles.css" />
  <style>
    :root{
      --brand:#13406a; --brand-700:#0e2f4e; --accent:#2ea44f; --accent-700:#22863a;
      --bg:#0d1117; --card:#161b22; --text:#e6edf3; --muted:#8b949e; --border:#30363d;
      --danger:#d73a49; --space-4:.25rem; --space-8:.5rem; --space-12:.75rem; --space-16:1rem; --space-24:1.5rem; --radius:12px;
    }
    body{background:var(--bg); color:var(--text); font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Apple Color Emoji"; margin:0;}
    .top-navigation{position:sticky; top:0; z-index:20; background:var(--card); border-bottom:1px solid var(--border);} 
    .nav-content{max-width:1100px; margin:0 auto; padding:var(--space-12) var(--space-16); display:flex; align-items:center; justify-content:space-between; gap:var(--space-16);} 
    .nav-logo{font-weight:700; color:var(--text);} 
    .nav-menu{display:flex; gap:var(--space-16); list-style:none; margin:0; padding:0;} 
    .nav-link{color:var(--muted); text-decoration:none; padding:.4rem .6rem; border-radius:8px;} 
    .nav-link:hover{color:var(--text); background:rgba(255,255,255,0.04);} 
    .nav-link.active{color:#fff; background:var(--brand);} 

    .container{max-width:1100px; margin:0 auto; padding:var(--space-24) var(--space-16);} 
    h1{margin:0 0 var(--space-16) 0; font-size:1.6rem;}

    .calculator-grid{display:grid; grid-template-columns: 1fr; gap:var(--space-24);} 
    @media (min-width: 960px){ .calculator-grid{grid-template-columns: 420px 1fr;} }

    .card{background:var(--card); border:1px solid var(--border); border-radius:var(--radius); padding:var(--space-24);}
    .form-group{display:flex; flex-direction:column; gap:.35rem; margin-bottom:var(--space-16);} 
    label{color:var(--muted); font-size:.9rem;} 
    input[type="number"], select{background:#0b0f15; color:var(--text); border:1px solid var(--border); border-radius:10px; padding:.7rem .8rem; outline:none;}
    input[type="number"]:focus, select:focus{border-color:var(--brand); box-shadow:0 0 0 3px rgba(19,64,106,.25);} 

    .row{display:flex; gap:var(--space-12);} 
    .row > *{flex:1;}

    .actions{display:grid; grid-template-columns: 1fr 1fr; gap:var(--space-12);} 
    .btn{cursor:pointer; border:none; border-radius:10px; padding:.8rem 1rem; font-weight:600;}
    .btn-primary{background:var(--accent); color:#041;}
    .btn-primary:hover{background:var(--accent-700); color:#fff;}
    .btn-secondary{background:transparent; color:var(--text); border:1px solid var(--border);} 
    .btn-secondary:hover{background:#0b0f15;}

    .result-card .monthly-payment{display:flex; align-items:center; justify-content:space-between; gap:var(--space-12);} 
    .payment-amount{font-size:2rem; font-weight:800;}

    .breakdown{display:grid; grid-template-columns: repeat(2, minmax(0,1fr)); gap:var(--space-16); margin-top:var(--space-16);} 
    .breakdown-item{background:#0b0f15; border:1px solid var(--border); border-radius:10px; padding:var(--space-16);} 

    .summary-section{display:grid; grid-template-columns: repeat(2, minmax(0,1fr)); gap:var(--space-12);} 
    .summary-item{display:flex; align-items:center; justify-content:space-between; padding:.6rem .8rem; border-bottom:1px dashed var(--border);} 
    .summary-label{color:var(--muted);} 

    .amortization-schedule .table-container{max-height:420px; overflow:auto; border:1px solid var(--border); border-radius:var(--radius);} 
    table{width:100%; border-collapse:collapse; min-width:640px;}
    thead tr{position:sticky; top:0; background:#0b0f15;}
    th, td{padding:.65rem .75rem; border-bottom:1px solid var(--border); text-align:right;}
    th:first-child, td:first-child, th:nth-child(2), td:nth-child(2){text-align:left;}

    .legend{display:flex; gap:var(--space-24); justify-content:center; margin-top:var(--space-16);} 
    .legend .dot{display:inline-block; width:10px; height:10px; border-radius:50%; margin-right:6px;}

    .disclaimer{color:var(--muted); font-size:.85rem; margin-top:var(--space-16);} 
  </style>
</head>
<body>
  <nav class="top-navigation" aria-label="Primary">
    <div class="nav-content">
      <div class="nav-logo">Property Calculator Hub</div>
      <ul class="nav-menu">
        <li><a class="nav-link" href="index.html">üè† Home</a></li>
        <li><a class="nav-link" href="mortgage.html">Mortgage Calculator</a></li>
        <li><a class="nav-link active" href="loan.html">Loan Calculator</a></li>
        <li><a class="nav-link" href="downpayment.html">Down Payment Calculator</a></li>
      </ul>
    </div>
  </nav>

  <main class="container">
    <h1>Loan Calculator</h1>

    <div class="calculator-grid">
      <div class="card">
        <form id="loanForm" onsubmit="event.preventDefault(); calculateLoan();">
          <div class="form-group">
            <label for="loanAmountInput">Loan Amount</label>
            <input id="loanAmountInput" type="number" min="0" step="1000" value="100000" inputmode="decimal" />
          </div>

          <div class="form-group">
            <label for="loanTermYears">Loan Term</label>
            <div class="row">
              <input id="loanTermYears" type="number" min="0" max="50" step="1" placeholder="Years" value="10" />
              <input id="loanTermMonths" type="number" min="0" max="11" step="1" placeholder="Months" value="0" />
            </div>
          </div>

          <div class="form-group">
            <label for="loanInterestRate">Interest Rate (%)</label>
            <input id="loanInterestRate" type="number" min="0" max="20" step="0.01" value="6.0" inputmode="decimal" />
          </div>

          <div class="form-group">
            <label for="compound">Compound</label>
            <select id="compound">
              <option value="12">Monthly (APR)</option>
              <option value="1">Annually (APY)</option>
              <option value="2">Semi-annually</option>
              <option value="4">Quarterly</option>
              <option value="24">Semi-monthly</option>
              <option value="26">Biweekly</option>
              <option value="52">Weekly</option>
              <option value="365">Daily</option>
            </select>
          </div>

          <div class="form-group">
            <label for="payback">Pay Back</label>
            <select id="payback">
              <option value="12">Every Month</option>
              <option value="365">Every Day</option>
              <option value="52">Every Week</option>
              <option value="26">Every 2 Weeks</option>
              <option value="24">Every Half Month</option>
              <option value="4">Every Quarter</option>
              <option value="2">Every 6 Months</option>
              <option value="1">Every Year</option>
            </select>
          </div>

          <div class="actions">
            <button type="submit" class="btn btn-primary">Calculate</button>
            <button type="button" class="btn btn-secondary" onclick="clearLoan()">Reset</button>
          </div>
        </form>
      </div>

      <div class="card result-card">
        <div class="monthly-payment">
          <div>Payment Every Period</div>
          <div class="payment-amount" id="loanPayment">$0.00</div>
        </div>

        <div class="breakdown">
          <div class="breakdown-item">
            <div>Total Payments</div>
            <p id="totalPayments">$0.00</p>
          </div>
          <div class="breakdown-item">
            <div>Total Interest</div>
            <p id="loanTotalInterest">$0.00</p>
          </div>
        </div>

        <hr style="border: none; border-top: 1px solid var(--border); margin: var(--space-24) 0;" />

        <div class="summary-section">
          <div class="summary-item"><span class="summary-label">Loan Amount</span><span class="summary-value" id="loanSummaryAmount">$0.00</span></div>
          <div class="summary-item"><span class="summary-label">Interest Rate</span><span class="summary-value" id="loanSummaryRate">0.00%</span></div>
          <div class="summary-item"><span class="summary-label">Loan Term</span><span class="summary-value" id="loanSummaryTerm">0 years</span></div>
          <div class="summary-item"><span class="summary-label" id="numberOfPaymentsLabel">Number of Payments</span><span class="summary-value" id="loanSummaryPayments">0</span></div>
          <div class="summary-item"><span class="summary-label">Total Interest</span><span class="summary-value" id="loanSummaryTotalInterest">$0.00</span></div>
          <div class="summary-item"><span class="summary-label">Payoff Date</span><span class="summary-value" id="loanPayoffDate">Jan. 2035</span></div>
        </div>

        <div style="margin-top: var(--space-24); text-align: center;">
          <canvas id="loanPieChart" width="250" height="250"></canvas>
          <div id="loanChartLegend" class="legend"></div>
        </div>
      </div>
    </div>

    <section class="amortization-schedule" aria-labelledby="amortizationHeading">
      <h2 id="amortizationHeading" style="margin: var(--space-24) 0 var(--space-12);">Amortization Schedule</h2>
      <div class="card">
        <div class="table-container">
          <table id="loanAmortizationTable">
            <thead>
              <tr>
                <th>Period</th>
                <th>Date</th>
                <th>Interest</th>
                <th>Principal</th>
                <th>Ending Balance</th>
              </tr>
            </thead>
            <tbody id="loanScheduleBody"></tbody>
          </table>
        </div>
      </div>
      <p class="disclaimer">This calculator provides estimates for educational purposes and is not a commitment to lend. Terms and results may vary; verify with your lender.</p>
    </section>
  </main>

  <script src="loan.js"></script>
</body>
</html>
